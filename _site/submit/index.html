<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Submit a Story | Cheeky Pubs</title>
    
    <link rel="stylesheet" href="http://localhost:4001/assets/css/style.css">
    <link rel="icon" type="image/png" href="http://localhost:4001/assets/images/logo/favicon.png">
    <link rel="apple-touch-icon" href="http://localhost:4001/assets/images/logo/apple-touch-icon.png">
</head>
<body>

    <header class="header">
        <div class="logo">
    <a href="http://localhost:4001/">
        <img src="http://localhost:4001/assets/images/logo/Cheekypub.png" alt="Cheekypub Logo">
    </a>
</div>

<nav class="nav-links" id="nav-menu">
    <ul>
        <li><a href="http://localhost:4001/">Stories</a></li>
        <li><a href="http://localhost:4001/about/">About</a></li>
        <li><a href="http://localhost:4001/submit-info/">Submit</a></li>
        <li><a href="https://cheekyparties.github.io" target="_blank" rel="noopener noreferrer" class="external-link">Parties ‚Üó</a></li>
    </ul>
</nav>

<button class="hamburger-btn" aria-label="Toggle navigation menu" aria-expanded="false">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
</button>

    </header>

    <main class="main-content">
        <div class="page-container">
          <div class="submit-page">
  <h1>Publish a Story</h1>
  
  <!-- Password Gate -->
  <div id="passwordGate" class="password-gate">
    <div class="password-container">
      <h2>üîí Password Required</h2>
      <p>Enter the submission password to access the story submission form.</p>
      <div class="password-form">
        <input type="password" id="passwordInput" placeholder="Enter password" autocomplete="off">
        <button type="button" id="passwordSubmit" class="btn-primary">Enter</button>
      </div>
      <p id="passwordError" class="error-message" style="display: none;">Incorrect password. Please try again.</p>
    </div>
  </div>

  <!-- Story Submission Form (hidden until password is correct) -->
  <div id="submissionForm" class="submission-form" style="display: none;">
    <p class="form-intro">Fill out the form below to submit your story. All fields marked with * are required.</p>
    
    <form id="storyForm">
      <!-- Chapter Type Selection -->
      <div class="form-group chapter-type-group">
        <label>Story Type</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="chapterType" value="standalone" checked> 
            <span>Standalone Story</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="chapterType" value="new-series"> 
            <span>Start New Multi-Chapter Series</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="chapterType" value="add-chapter"> 
            <span>Add Chapter to Existing Story</span>
          </label>
        </div>
      </div>

      <!-- Existing Story Selection (for adding chapters) -->
      <div class="form-group" id="existingStoryGroup" style="display: none;">
        <label for="existingStory">Select Existing Story *</label>
        <select id="existingStory" name="existingStory">
          <option value="">Loading stories...</option>
        </select>
        <small class="form-hint">Select the story you want to add a new chapter to.</small>
      </div>

      <!-- Chapter Number (for multi-chapter stories) -->
      <div class="form-group" id="chapterNumberGroup" style="display: none;">
        <label for="chapterNumber">Chapter Number *</label>
        <input type="number" id="chapterNumber" name="chapterNumber" min="1" value="1" placeholder="1">
        <small class="form-hint">For new series, this starts at 1. For existing stories, enter the next chapter number.</small>
      </div>

      <!-- Chapter Title (optional) -->
      <div class="form-group" id="chapterTitleGroup" style="display: none;">
        <label for="chapterTitle">Chapter Title (Optional)</label>
        <input type="text" id="chapterTitle" name="chapterTitle" placeholder="e.g., The Beginning">
        <small class="form-hint">An optional subtitle for this chapter.</small>
      </div>

      <div class="form-group">
        <label for="storyTitle">Story Title *</label>
        <input type="text" id="storyTitle" name="title" required placeholder="Enter your story title">
      </div>

      <div class="form-group">
        <label for="storyAuthor">Author Name *</label>
        <input type="text" id="storyAuthor" name="author" required placeholder="Your pen name">
      </div>

      <div class="form-group">
        <label for="storyTags">Tags</label>
        <input type="text" id="storyTags" name="tags" placeholder="e.g., romance, drama, fiction (comma separated)">
        <small class="form-hint">Separate multiple tags with commas. All tags will be displayed in lowercase.</small>
      </div>

      <div class="form-group">
        <label for="storyDescription">Short Description</label>
        <input type="text" id="storyDescription" name="description" placeholder="A one-sentence summary of the story" maxlength="200">
        <small class="form-hint">A brief description shown on the story listing page (max 200 characters). Only needed for standalone stories or the first chapter of a series.</small>
      </div>

      <div class="form-group">
        <label for="storyContent">Story Content *</label>
        <textarea id="storyContent" name="content" required rows="20" placeholder="Write or paste your story here. You can use Markdown formatting."></textarea>
        <small class="form-hint">You can use <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">Markdown</a> for formatting (bold, italic, headers, etc.)</small>
        <div class="form-note">
          <strong>üì∑ Including Images:</strong> Upload your image to a free hosting service like <a href="https://imgur.com/" target="_blank" rel="noopener">Imgur</a>, <a href="https://imgbb.com/" target="_blank" rel="noopener">ImgBB</a>, or <a href="https://postimages.org/" target="_blank" rel="noopener">Postimages</a>. Then copy the direct image URL and use this Markdown syntax in your story:<br>
          <code>![Image description](https://i.imgur.com/yourimage.jpg)</code>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary btn-submit" id="submitBtn">
          <span class="btn-text">Publish Story</span>
          <span class="btn-loading" style="display: none;">Publishing...</span>
        </button>
      </div>
    </form>

    <div id="submissionSuccess" class="submission-success" style="display: none;">
      <h2>‚úÖ Story Submitted!</h2>
      <p>Thank you for your submission. Your story has been received and will be reviewed before being published.</p>
      <p><a href="http://localhost:4001/">Return to Stories</a></p>
    </div>

    <div id="submissionError" class="submission-error" style="display: none;">
      <h2>‚ùå Submission Error</h2>
      <p>There was an error submitting your story. Please try again or contact us if the problem persists.</p>
      <p id="errorDetails"></p>
      <button type="button" class="btn-secondary" onclick="document.getElementById('submissionError').style.display='none'; document.getElementById('storyForm').style.display='block';">Try Again</button>
    </div>
  </div>
</div>

<script src="http://localhost:4001/assets/js/submit-story.js"></script>

        </div>
    </main>

    <footer class="footer">
        <div class="social-links">
    <a href="https://twitter.com/cheekyspankos" target="_blank" rel="noopener">
        <img src="http://localhost:4001/assets/images/socials/twitter.svg" alt="Twitter">
    </a>
    <a href="https://www.fetlife.com/groups/170517" target="_blank" rel="noopener">
        <img src="http://localhost:4001/assets/images/socials/fetlife.svg" alt="FetLife">
    </a>
    <a href="mailto:cheekypubs@gmail.com">
        <img src="http://localhost:4001/assets/images/socials/email.svg" alt="Email">
    </a>
</div>
<p>&copy; 2026 Cheeky Pubs. All rights reserved.</p>
<p class="admin-link"><a href="http://localhost:4001/submit/">Admin Login</a></p>

    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" aria-label="Back to top" title="Back to top">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
        <path d="M12 4l-8 8h5v8h6v-8h5z"/>
      </svg>
    </button>
    
    <script src="http://localhost:4001/assets/js/hamburger.js"></script>
    <script>
      // Back to top button
      (function() {
        var btn = document.getElementById('backToTop');
        if (!btn) return;
        window.addEventListener('scroll', function() {
          btn.classList.toggle('visible', window.scrollY > 400);
        });
        btn.addEventListener('click', function() {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      })();
    </script>
</body>
</html>
