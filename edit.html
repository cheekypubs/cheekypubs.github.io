---
layout: default
title: Edit a Story
permalink: /edit/
---

<div class="edit-page">
  <h1>Edit a Story</h1>
  
  <!-- Password Gate -->
  <div id="passwordGate" class="password-gate">
    <div class="password-container">
      <h2>üîí Password Required</h2>
      <p>Enter the submission password to access the story editing form.</p>
      <div class="password-form">
        <input type="password" id="passwordInput" placeholder="Enter password" autocomplete="off">
        <button type="button" id="passwordSubmit" class="btn-primary">Enter</button>
      </div>
      <p id="passwordError" class="error-message" style="display: none;">Incorrect password. Please try again.</p>
    </div>
  </div>

  <!-- Story Editing Form (hidden until password is correct) -->
  <div id="editingForm" class="editing-form" style="display: none;">
    <p class="form-intro">Select a story to edit and make your changes below.</p>
    
    <form id="storyEditForm">
      <!-- Story Selection -->
      <div class="form-group">
        <label for="storySelect">Select Story to Edit *<\/label>
        <select id="storySelect" name="storySelect">
          <option value="">Loading stories...</option>
        </select>
        <small class="form-hint">Choose a story to edit its details and content.</small>
      </div>

      <!-- Story Preview (disabled, for reference) -->
      <div id="storyPreview" style="display: none;">
        <div class="form-group">
          <label>Current File Path<\/label>
          <input type="text" id="currentFilePath" disabled style="background-color: #f0f0f0;">
          <small class="form-hint">This shows the current filename. You can change it by editing title, author, and date.</small>
        </div>
      </div>

      <!-- Edit Fields -->
      <div class="form-group">
        <label for="editTitle">Story Title *<\/label>
        <input type="text" id="editTitle" name="title" required placeholder="Enter story title">
      </div>

      <div class="form-group">
        <label for="editAuthor">Author Name *<\/label>
        <input type="text" id="editAuthor" name="author" required placeholder="Author name">
      </div>

      <div class="form-group">
        <label for="editDate">Date *<\/label>
        <input type="date" id="editDate" name="date" required>
        <small class="form-hint">Date the story was last updated.</small>
      </div>

      <!-- Tags -->
      <div class="form-group">
        <label for="editTags">Tags<\/label>
        <input type="text" id="editTags" name="tags" placeholder="e.g., romance, drama, fiction (comma separated)">
        <small class="form-hint">Separate multiple tags with commas. All tags will be displayed in lowercase.</small>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="editDescription">Short Description<\/label>
        <input type="text" id="editDescription" name="description" placeholder="A one-sentence summary of the story" maxlength="200">
        <small class="form-hint">A brief description shown on the story listing page (max 200 characters). Only needed for standalone stories or the first chapter of a series.</small>
      </div>

      <!-- Story ID & Chapter Info -->
      <div class="form-group">
        <label for="editStoryId">Story ID (for series)<\/label>
        <input type="text" id="editStoryId" name="story_id" placeholder="e.g., hudsons-best">
        <small class="form-hint">Leave blank for standalone stories. Use this for multi-chapter series.</small>
      </div>

      <div class="form-group">
        <label for="editChapter">Chapter Number<\/label>
        <input type="number" id="editChapter" name="chapter" min="1" placeholder="1">
        <small class="form-hint">Leave blank for standalone stories.</small>
      </div>

      <div class="form-group">
        <label for="editChapterTitle">Chapter Title (Optional)<\/label>
        <input type="text" id="editChapterTitle" name="chapter_title" placeholder="e.g., The Beginning">
        <small class="form-hint">An optional subtitle for this chapter.</small>
      </div>

      <!-- Story Content -->
      <div class="form-group">
        <label for="editContent">Story Content *<\/label>
        <textarea id="editContent" name="content" required rows="20" placeholder="Story content here. You can use Markdown formatting."></textarea>
        <small class="form-hint">You can use <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">Markdown</a> for formatting (bold, italic, headers, etc.)</small>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="submit" class="btn-primary btn-submit" id="updateBtn">
          <span class="btn-text">Update Story<\/span>
          <span class="btn-loading" style="display: none;">Updating...<\/span>
        </button>
        <button type="button" class="btn-secondary" onclick="clearForm()">Clear Form<\/button>
      </div>
    </form>

    <!-- Success Message -->
    <div id="editSuccess" class="edit-success" style="display: none;">
      <h2>‚úÖ Story Updated!<\/h2>
      <p>Your story has been successfully updated.<\/p>
      <button type="button" class="btn-primary" onclick="location.reload();">Edit Another Story<\/button>
      <p><a href="{{ '/' | absolute_url }}">Return to Stories<\/a></p>
    </div>

    <!-- Error Message -->
    <div id="editError" class="edit-error" style="display: none;">
      <h2>‚ùå Update Error<\/h2>
      <p>There was an error updating your story. Please try again or contact us if the problem persists.<\/p>
      <p id="errorDetails"><\/p>
      <button type="button" class="btn-secondary" onclick="document.getElementById('editError').style.display='none'; document.getElementById('storyEditForm').style.display='block';">Try Again<\/button>
    </div>
  </div>
</div>

<script src="{{ '/assets/js/edit-story.js' | absolute_url }}"><\/script>